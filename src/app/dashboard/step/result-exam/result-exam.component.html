<app-breadcrumbs>
  <app-breadcrumb-item [title]="('STEP_MENU'|translate)" [route]="'/dashboard/'+RoutesName.stepRoute" [last]="true"/>
  <app-breadcrumb-item [title]="('RESULT'|translate)" [last]="false" />
</app-breadcrumbs>
<div *ngIf="results; else elseBlock" class="container my-10 mx-auto md:px-6 bg-[rgba(255,255,255,0.7)] py-5 rounded-[20px] main-violet-first-rounded">
  <div
    class="mb-3 inline-flex w-full items-center rounded-lg bg-success-100 px-6 py-5 text-base text-success-700"
    role="alert">
  <span class="mr-2">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      class="h-5 w-5">
      <path
        fill-rule="evenodd"
        d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
        clip-rule="evenodd" />
    </svg>
  </span>
    {{results.is_right}} / {{results.count}}
  </div>

  <div *ngFor="let question of results?.questions"
       class="block rounded-lg p-6 my-3">
    <div class="relative">
      <div class="min-h-[200px] w-full bg-[#ce6f34] rounded-[40px] absolute z-0 top-[-30px]"></div>
      <div class="card bg-white h-full px-5 py-3 min-h-[200px] shadow-xl rounded-[40px] main-violet-first-rounded relative z-10">
      <div class="card h-full-header px-[10px] py-[15px] min-h-[60px]">
        <h5
          class="mb-2 text-xl font-medium leading-tight text-neutral-800">
          <div [mathjax]="question.question.text | mathjaxTransform"></div>
        </h5>
        <div class="my-2" *ngIf="question.question.context" [innerHTML]="question.question.context.context"></div>
      </div>
      <div class="content-question">
        <div class="my-2">
          <div class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('a', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'a.' + question.question.answer_a | mathjaxTransform"></div>
            </label>
          </div>
          <div class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('b', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'b.' + question.question.answer_b | mathjaxTransform"></div>
            </label>
          </div>
          <div class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('c', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'c.' + question.question.answer_c | mathjaxTransform"></div>
            </label>
          </div>
          <div  class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('d', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'d.' + question.question.answer_d | mathjaxTransform"></div>
            </label>
          </div>
          <div *ngIf="question.question.answer_e" class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('e', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'e.' + question.question.answer_e | mathjaxTransform"></div>
            </label>
          </div>
          <div *ngIf="question.question.answer_f" class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('f', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'f.' + question.question.answer_f | mathjaxTransform"></div>
            </label>
          </div>
          <div *ngIf="question.question.answer_g" class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('g', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'g.' + question.question.answer_g | mathjaxTransform"></div>
            </label>
          </div>
          <div *ngIf="question.question.answer_h" class="mb-4 block min-h-[1.5rem] pl-[1.5rem]">
            <label
              class="mt-px inline-block pl-[0.15rem] hover:cursor-pointer" [ngStyle]="{'color': checkAnswer('h', question.result ? question.result.user_answer : null, question.result ? question.result.is_right : null)}">
              <div [mathjax]="'h.' + question.question.answer_h | mathjaxTransform"></div>
            </label>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>

  <div class="text-right">
    <a
      [routerLink]="StrHelper.getDashboardRouteName(RoutesName.subStepExam + '/' + subStepId + '/' + localeId)"
      class="ml-3 inline-block bg-violet-first px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white rounded-full main-violet-first-rounded"
    >
      {{'RESTART_BUTTON' | translate}}
    </a>

    <a [routerLink]="StrHelper.getDashboardRouteName(RoutesName.subStepRoute + '/' + subStepId + '/' + localeId)"
       class="ml-3 inline-block bg-violet-first px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white rounded-full main-violet-first-rounded"
    >
      {{'BACK_BUTTON' | translate}}
    </a>
  </div>
</div>
<ng-template #elseBlock>
  {{'NO_RESULTS' | translate}}
</ng-template>
